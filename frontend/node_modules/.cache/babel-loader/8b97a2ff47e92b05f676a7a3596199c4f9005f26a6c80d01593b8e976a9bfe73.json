{"ast":null,"code":"var _jsxFileName = \"D:\\\\Traffic-Simulator Project\\\\urban-mobility-simulation\\\\frontend\\\\src\\\\components\\\\mapView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { MapContainer, TileLayer, FeatureGroup } from 'react-leaflet';\nimport { EditControl } from 'react-leaflet-draw';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet-draw/dist/leaflet.draw.css';\nimport L from 'leaflet';\nimport { saveAs } from 'file-saver';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TrafficMap = () => {\n  _s();\n  const [map, setMap] = useState(null);\n  const [cordinates, setCordinates] = useState({});\n  const drawnItemsRef = useRef(new L.FeatureGroup());\n  const [rectangle, setRectangle] = useState(null);\n  const handleCreated = e => {\n    const layer = e.layer;\n\n    // Remove any existing rectangle\n    if (rectangle) {\n      drawnItemsRef.current.removeLayer(rectangle);\n    }\n    setRectangle(layer);\n    drawnItemsRef.current.addLayer(layer);\n  };\n  const handleDeleted = () => {\n    setRectangle(null); // Clear the rectangle state when deleted\n  };\n  const exportOSMFile = () => {\n    if (rectangle) {\n      const bounds = rectangle.getBounds();\n      const bboxString = bounds.toBBoxString();\n      axios.get(`http://localhost:5000/api/osm/download?bbox=${bboxString}`, {\n        responseType: 'blob' // Get response as blob\n      }).then(response => {\n        const blob = new Blob([response.data], {\n          type: 'application/octet-stream'\n        });\n        saveAs(blob, 'map.osm');\n        console.log('OSM data downloaded successfully');\n      }).catch(error => {\n        console.error('Error downloading OSM data:', error);\n      });\n      const bboxObject = bboxString.split(',').reduce((acc, val, index) => {\n        switch (index) {\n          case 0:\n            acc.minX = parseFloat(val);\n            break;\n          case 1:\n            acc.minY = parseFloat(val);\n            break;\n          case 2:\n            acc.maxX = parseFloat(val);\n            break;\n          case 3:\n            acc.maxY = parseFloat(val);\n            break;\n        }\n        return acc;\n      }, {});\n      setCordinates(bboxObject);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [51.505, -0.09],\n      zoom: 13,\n      style: {\n        height: '600px',\n        width: '100%'\n      },\n      whenCreated: setMap,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FeatureGroup, {\n        ref: drawnItemsRef.current,\n        children: /*#__PURE__*/_jsxDEV(EditControl, {\n          position: \"topleft\" // Change position to 'topleft' for placing below zoom controls\n          ,\n          onCreated: handleCreated,\n          onDeleted: handleDeleted,\n          draw: {\n            rectangle: true,\n            polygon: false,\n            polyline: false,\n            circle: false,\n            marker: false,\n            circlemarker: false\n          },\n          edit: {\n            edit: true,\n            remove: true\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: exportOSMFile,\n      children: \"Download Selected Area (.osm)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(TrafficMap, \"1R+DjQSizmlrsDViF2Pd4LWlL2c=\");\n_c = TrafficMap;\nexport default TrafficMap;\nvar _c;\n$RefreshReg$(_c, \"TrafficMap\");","map":{"version":3,"names":["React","useState","useRef","MapContainer","TileLayer","FeatureGroup","EditControl","L","saveAs","axios","jsxDEV","_jsxDEV","TrafficMap","_s","map","setMap","cordinates","setCordinates","drawnItemsRef","rectangle","setRectangle","handleCreated","e","layer","current","removeLayer","addLayer","handleDeleted","exportOSMFile","bounds","getBounds","bboxString","toBBoxString","get","responseType","then","response","blob","Blob","data","type","console","log","catch","error","bboxObject","split","reduce","acc","val","index","minX","parseFloat","minY","maxX","maxY","children","center","zoom","style","height","width","whenCreated","attribution","url","fileName","_jsxFileName","lineNumber","columnNumber","ref","position","onCreated","onDeleted","draw","polygon","polyline","circle","marker","circlemarker","edit","remove","onClick","_c","$RefreshReg$"],"sources":["D:/Traffic-Simulator Project/urban-mobility-simulation/frontend/src/components/mapView.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport { MapContainer, TileLayer, FeatureGroup } from 'react-leaflet';\r\nimport { EditControl } from 'react-leaflet-draw';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport 'leaflet-draw/dist/leaflet.draw.css';\r\nimport L from 'leaflet';\r\nimport { saveAs } from 'file-saver';\r\nimport axios from 'axios';\r\n\r\nconst TrafficMap = () => {\r\n  const [map, setMap] = useState(null);\r\n  const [cordinates, setCordinates] = useState({});\r\n  const drawnItemsRef = useRef(new L.FeatureGroup());\r\n  const [rectangle, setRectangle] = useState(null);\r\n\r\n  const handleCreated = (e) => {\r\n    const layer = e.layer;\r\n    \r\n    // Remove any existing rectangle\r\n    if (rectangle) {\r\n      drawnItemsRef.current.removeLayer(rectangle);\r\n    }\r\n    \r\n    setRectangle(layer);\r\n    drawnItemsRef.current.addLayer(layer);\r\n  };\r\n\r\n  const handleDeleted = () => {\r\n    setRectangle(null);  // Clear the rectangle state when deleted\r\n  };\r\n\r\n  const exportOSMFile = () => {\r\n    if (rectangle) {\r\n      const bounds = rectangle.getBounds();\r\n      const bboxString = bounds.toBBoxString();\r\n\r\n      axios.get(`http://localhost:5000/api/osm/download?bbox=${bboxString}`, {\r\n        responseType: 'blob'  // Get response as blob\r\n      })\r\n      .then(response => {\r\n        const blob = new Blob([response.data], { type: 'application/octet-stream' });\r\n        saveAs(blob, 'map.osm');\r\n        console.log('OSM data downloaded successfully');\r\n      })\r\n      .catch(error => {\r\n        console.error('Error downloading OSM data:', error);\r\n      });\r\n      \r\n      const bboxObject = bboxString.split(',').reduce((acc, val, index) => {\r\n        switch (index) {\r\n          case 0:\r\n            acc.minX = parseFloat(val);\r\n            break;\r\n          case 1:\r\n            acc.minY = parseFloat(val);\r\n            break;\r\n          case 2:\r\n            acc.maxX = parseFloat(val);\r\n            break;\r\n          case 3:\r\n            acc.maxY = parseFloat(val);\r\n            break;\r\n        }\r\n        return acc;\r\n      }, {});\r\n      \r\n      setCordinates(bboxObject);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <MapContainer\r\n        center={[51.505, -0.09]}\r\n        zoom={13}\r\n        style={{ height: '600px', width: '100%' }}\r\n        whenCreated={setMap}\r\n      >\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        \r\n        <FeatureGroup ref={drawnItemsRef.current}>\r\n          <EditControl\r\n            position=\"topleft\" // Change position to 'topleft' for placing below zoom controls\r\n            onCreated={handleCreated}\r\n            onDeleted={handleDeleted}\r\n            draw={{\r\n              rectangle: true,\r\n              polygon: false,\r\n              polyline: false,\r\n              circle: false,\r\n              marker: false,\r\n              circlemarker: false\r\n            }}\r\n            edit={{\r\n              edit: true,\r\n              remove: true\r\n            }}\r\n          />\r\n        </FeatureGroup>\r\n      </MapContainer>\r\n      \r\n      <button onClick={exportOSMFile}>Download Selected Area (.osm)</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrafficMap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}